<section id="projects" class="projects">
  <div class="container">
    <!-- Judul Bagian -->
    <h2 class="section-title">{{ languageService.getTranslation('projectsSectionTitle') | async }}</h2>

    <div class="filters">
      <!-- Loop melalui filters$ (Observable) -->
      <button
        *ngFor="let filter of (filters$ | async)"
        class="filter-btn"
        [class.active]="activeFilter === filter.value"
        (click)="setFilter(filter.value)">
        {{ filter.label }}
      </button>
    </div>

    <!-- Pesan jika tidak ada proyek ditemukan (BARU) -->
    <div *ngIf="filteredProjectsByCategory.length === 0" class="no-items-message">
      {{ languageService.getTranslation('noProjectsFound') | async }}
    </div>

    <div class="projects-grid">
      <div
        *ngFor="let project of displayedProjects"
        class="project-card"
        [class.featured]="project.featured">
        <!-- Label "Featured" sebagai elemen HTML agar bisa diterjemahkan -->
        <span *ngIf="project.featured" class="featured-label">{{ languageService.getTranslation('featuredLabel') | async }}</span>

        <div class="project-thumbnail">
          <img
            [ngSrc]="project.thumbnail"
            [alt]="getTranslatedText(project.title)"
            width="500"
            height="250"
            loading="lazy"
            (click)="openProjectDetails(project)" />
        </div>
        <div class="project-info">
          <!-- Judul Proyek yang Diterjemahkan -->
          <h3 class="project-title">{{ getTranslatedText(project.title) }}</h3>
          <!-- Deskripsi Proyek yang Diterjemahkan dan Dipotong -->
          <p class="project-description">
            {{ getTranslatedText(project.description) | slice : 0 : 100
            }}{{ getTranslatedText(project.description).length > 100 ? '...' : '' }}
          </p>
          <div class="project-technologies">
            <span *ngFor="let tech of project.technologies.slice(0, 3)">{{
              tech
              }}</span>
            <span *ngIf="project.technologies.length > 3">+{{
              project.technologies.length - 3 }}</span>
          </div>
          <div class="project-actions">
            <button
              class="btn btn-primary"
              (click)="openProjectDetails(project)">
              <!-- Tombol "View Details" yang Diterjemahkan -->
              {{ languageService.getTranslation('viewDetailsButton') | async }}
            </button>
            <div class="project-links">
              <a
                *ngIf="project.githubUrl"
                [href]="project.githubUrl"
                target="_blank"
                rel="noopener noreferrer"
                class="project-link"
                [attr.aria-label]="(languageService.getTranslation('githubRepoButton') | async)">
                <fa-icon [icon]="faGithub"></fa-icon>
              </a>
              <a
                *ngIf="project.liveUrl"
                [href]="project.liveUrl"
                target="_blank"
                rel="noopener noreferrer"
                class="project-link"
                [attr.aria-label]="(languageService.getTranslation('liveDemoButton') | async)">
                <fa-icon [icon]="faChrome"></fa-icon>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tombol "Show More" (BARU) -->
    <div class="show-more-container" *ngIf="canShowMoreProjects">
      <button class="btn btn-primary show-more-btn" (click)="loadMoreProjects()">
        {{ languageService.getTranslation('showMoreButtonLabel') | async }}
      </button>
    </div>

  </div>
</section>
